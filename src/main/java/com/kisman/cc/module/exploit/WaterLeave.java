package com.kisman.cc.module.exploit;

import com.kisman.cc.Kisman;
import com.kisman.cc.module.Category;
import com.kisman.cc.module.Module;
import com.kisman.cc.settings.Setting;
import i.gishreloaded.gishcode.utils.visual.ChatUtils;
import net.minecraft.init.Blocks;
import net.minecraft.util.math.BlockPos;

public class WaterLeave extends Module {
    double heigth = 0;

    boolean test = false;

    public WaterLeave() {
        super("WaterLeave", "WaterLeave", Category.EXPLOIT);

        Kisman.instance.settingsManager.rSetting(new Setting("Heigth", this, 1, 1, 20, false));
    }

    public void update() {
        this.heigth = Kisman.instance.settingsManager.getSettingByName(this, "Heigth").getValDouble();
    }

    public void onEnable() {
        if(mc.player == null && mc.world == null) return;

        if(mc.world.getBlockState(new BlockPos(mc.player.posX, mc.player.posY - 0.95, mc.player.posZ)).getBlock() == Blocks.WATER){
            mc.player.motionY = (float) this.heigth / 1d;
            mc.player.onGround = true;
            this.test = true;
        }
        if(mc.player.isInWater() || mc.player.isInLava()){
            mc.player.onGround = true;
            this.test = true;
        }

        if(!test) {
            ChatUtils.error("Water or Lava not found!");
            super.setToggled(false);
        }
    }
}
