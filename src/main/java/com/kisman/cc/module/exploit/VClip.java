package com.kisman.cc.module.exploit;

import com.kisman.cc.module.*;
import com.kisman.cc.settings.Setting;
import com.kisman.cc.util.*;
import net.minecraft.network.play.client.*;

public class VClip extends Module {
    private Setting offGround = new Setting("OffGround", this, false);
    private Setting offset = new Setting("Offset", this, 1.4f, 1.1f, 2, false);

    public VClip() {
        super("VClip", "gay bypass for cc fixed", Category.EXPLOIT);

        setmgr.rSetting(offGround);
        setmgr.rSetting(offset);
    }

    public void onEnable() {
        if(mc.player == null && mc.world == null) return;

        if(mc.player.posY < 6 && !mc.player.isElytraFlying() && mc.player.onGround) {
            mc.player.connection.sendPacket(new CPacketEntityAction(mc.player, CPacketEntityAction.Action.START_SNEAKING));
            mc.player.jump();
            mc.getConnection().sendPacket(new CPacketPlayer.Position(mc.player.posX, ((mc.player.posY + offset.getValDouble()) * -1), mc.player.posZ, offGround.getValBoolean()));
            EntityUtil.stopSneaking(false);
            setToggled(false);
        }
    }
}
